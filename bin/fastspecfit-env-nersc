#!/bin/bash

echo 'Loading FastSpecFit.'
source /global/common/software/desi/desi_environment.sh main
#source /dvs_ro/common/software/desi/desi_environment.sh 23.1
#source /global/cfs/cdirs/desi/software/desi_environment.sh main
#source /global/cfs/cdirs/desi/software/desi_environment.sh 23.1
#module swap desispec/0.59.2

#module load fastspecfit/main
#module load fastspecfit/2.5.2
#for package in fastspecfit redrock; do
#for package in fastspecfit redrock rrevaluator; do
for package in fastspecfit; do
    echo Loading local check-out of $package
    export PATH=/global/common/software/desi/users/ioannis/$package/bin:$PATH
    export PYTHONPATH=/global/common/software/desi/users/ioannis/$package/py:$PYTHONPATH
done

#echo 'Loading local check-out of speclite'
#export PYTHONPATH=$HOME/code/desihub/speclite:$PYTHONPATH
#for package in pyneb NonnegMFPy SetCoverPy; do
#for package in SetCoverPy; do
#    echo Loading local check-out of $package
#    export PYTHONPATH=$HOME/code/git/$package:$PYTHONPATH
#done

#echo 'Loading local check-out of empca, nearly_nmf, and Y3-templates'
#export PYTHONPATH=$HOME/code/desihub/empca:$PYTHONPATH
#export PYTHONPATH=$HOME/code/desihub/nearly_nmf/py:$PYTHONPATH
#export PATH=$HOME/code/desihub/fastspecfit-projects/redrock-templates/Y3-templates:$PATH
#export PYTHONPATH=$HOME/code/desihub/fastspecfit-projects/redrock-templates/Y3-templates/py:$PYTHONPATH

export DESI_SPECTRO_REDUX='/global/cfs/cdirs/desi/spectro/redux'
export DUST_DIR='/global/cfs/cdirs/desi/external/dust/v0_1'
export FPHOTO_DIR='/global/cfs/cdirs/desi/external/legacysurvey/dr9'
#export FTEMPLATES_DIR='/global/cfs/cdirs/desi/users/ioannis/fastspecfit/templates'
export FTEMPLATES_DIR='/global/cfs/cdirs/desi/public/external/templates/fastspecfit'

echo 'DESI_SPECTRO_REDUX='$DESI_SPECTRO_REDUX
echo 'DUST_DIR='$DUST_DIR
echo 'FPHOTO_DIR='$FPHOTO_DIR
echo 'FTEMPLATES_DIR='$FTEMPLATES_DIR
